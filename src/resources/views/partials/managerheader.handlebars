<nav class="sidebar close">
    <header>
        <div class="image-text">
            <span class="image">
                <img src="/img/logo.png" alt="" />
            </span>

            <div class="text logo-text">
                <span class="name">MT</span>
                <span class="profession">Covid System</span>
            </div>
        </div>

        <i class="bx bx-chevron-right toggle"></i>
    </header>

    <div class="menu-bar">
        <div class="menu">

            <li class="search-box">
                <i class="bx bx-search icon"></i>
                <input type="text" placeholder="Tìm kiếm..." />
            </li>

            <ul class="menu-links">
                <li class="patient-list-button">
                    <a href="/manager/{{user._id}}/patient_list">
                        <i class="bx bx-user icon"></i>
                        <span class="text nav-text">Quản lý bệnh nhân</span>
                    </a>
                </li>

                <li class="hospital-list-button">
                    <a href="/manager/{{user._id}}/editproduct/1">
                        <i class="bx bx-cart-alt icon"></i>
                        <span class="text nav-text">Nhu yếu phẩm</span>
                    </a>
                </li>

                <li class="hospital-list-button">
                    <a href="/manager/{{user._id}}/editpackages">
                        <i class="bx bx-package icon"></i>
                        <span class="text nav-text">Gói nhu yếu phẩm</span>
                    </a>
                </li>

                <li class="hospital-list-button">
                    <a href="/manager/{{user._id}}/statistical">
                        <i class='bx bx-line-chart icon'></i>
                        <span class="text nav-text">Thống kê</span>
                    </a>
                </li>

                <li class="hospital-list-button">
                    <a href="/manager/{{user._id}}/editcredit">
                        <i class='bx bx-spreadsheet icon'></i>

                        <span class="text nav-text">Quản lý thanh toán</span>
                    </a>
                </li>

                <li class="hospital-list-button">
                    <a href="/manager/{{user._id}}/manaDebt">
                        <i class='bx bx-task-x icon'></i>
                        <span class="text nav-text">Quản lý hóa đơn</span>
                    </a>
                </li>


            </ul>
        </div>

        <div class="bottom-content">

            <li class="">
                <a href="/user/logout">
                    <i class="bx bx-log-out icon"></i>
                    <span class="text nav-text">Đăng xuất</span>
                </a>
            </li>

            <li class="mode">
                <div class="sun-moon">
                    <i class="bx bx-moon icon moon"></i>
                    <i class="bx bx-sun icon sun"></i>
                </div>
                <span class="mode-text text">Dark mode</span>

                <div class="toggle-switch">
                    <span class="switch"></span>
                </div>
            </li>

        </div>
    </div>
</nav>
<script src="/jquery-3.4.1.min.js"></script>

<script>
    const x = window.location.href
    const a = document.querySelectorAll(".menu-links > li > a")
    a.forEach(a => {
        a.parentElement.classList.remove('active');
        if (x == a.href) {
            a.parentElement.classList.add('active');
        } else {
            a.parentElement.classList.remove('active');

        }
    })
    const body = document.querySelector('body'),
        sidebar = body.querySelector('nav'),
        toggle = body.querySelector(".toggle"),
        searchBtn = body.querySelector(".search-box"),
        modeSwitch = body.querySelector(".toggle-switch"),
        modeText = body.querySelector(".mode-text");


    toggle.addEventListener("click", () => {
        sidebar.classList.toggle("close");
    })

    searchBtn.addEventListener("click", () => {
        sidebar.classList.remove("close");
    })

    modeSwitch.addEventListener("click", () => {
        body.classList.toggle("dark");

        if (body.classList.contains("dark")) {
            modeText.innerText = "Light mode";
        } else {
            modeText.innerText = "Dark mode";

        }
    });
    const home = document.querySelector(".home")
    const sideBar = document.querySelector(".sidebar")
    const content = document.querySelector(".content")

    const main = document.querySelector("#main")

    if (main || content) {
        sideBar.style.display = "none";
        if (home != null) {
            home.style.display = "none"
        }
    } else {
        if (home != null) {
            home.style.display = "block"
        }

    }
    const modeToggle = document.querySelector(".drak-light");
    if (modeToggle != null) {
        modeToggle.addEventListener("click", () => {
            modeToggle.classList.toggle("active");
            body.classList.toggle("dark");
            if (!body.classList.contains("dark")) {
                localStorage.setItem("mode", "light-mode");
            }
            else {
                localStorage.setItem("mode", "dark-mode");
            }
        })
    }

    const pwShowHide = document.querySelectorAll(".showHidePw"),
        pwFields = document.querySelectorAll(".password"),
        signUp = document.querySelector(".signup-link"),
        login = document.querySelector(".login-link"),
        checkbox = document.querySelectorAll(".allow"),
        checkboxLabel = document.querySelectorAll(".allow-label");


    // //   js code to show/hide password and change icon
    // eyeIcon là cái icon trong khung password
    pwShowHide.forEach(eyeIcon => {
        eyeIcon.addEventListener("click", () => {
            pwFields.forEach(pwField => {
                if (pwField.type === "password") {
                    pwField.type = "text";

                    pwShowHide.forEach(icon => {
                        icon.classList.replace("uil-eye-slash", "uil-eye");
                    })
                } else {
                    pwField.type = "password";

                    pwShowHide.forEach(icon => {
                        icon.classList.replace("uil-eye", "uil-eye-slash");
                    })
                }
            })
        })
    })


    // js code to appear signup and login form
    if (signUp != null && login != null) {
        signUp.addEventListener("click", () => {
            content.classList.add("active");

        });
        login.addEventListener("click", () => {
            content.classList.remove("active");

        });
    }

</script>